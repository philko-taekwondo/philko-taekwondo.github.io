//! SPDX-License-Identifier: LicenseRef-Webstudio,Inc-Proprietary
var wn=Object.defineProperty,Tn=(e,n,t)=>n in e?wn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,d=(e,n,t)=>Tn(e,typeof n!="symbol"?n+"":n,t);class m{}class xe extends m{constructor(n){super(),d(this,"value"),this.value=n}}class ye extends m{constructor(n){super(),d(this,"value"),this.value=n}}class Cn extends m{constructor(n){super(),d(this,"value"),this.value=n}}class bn extends m{constructor(n,t="unrestricted"){super(),d(this,"type"),d(this,"value"),this.value=n,this.type=t}}class xn extends m{constructor(n){super(),d(this,"value"),this.value=n}}class kn extends m{}class Pn extends m{constructor(n){super(),d(this,"value"),this.value=n}}class ue extends m{}class C extends m{constructor(n){super(),d(this,"value"),this.value=n}}class F extends m{constructor(n,t="integer"){super(),d(this,"value"),d(this,"type"),this.value=n,this.type=t}}class ae extends m{constructor(n){super(),d(this,"value"),this.value=n}}class B extends m{constructor(n,t,i){super(),d(this,"value"),d(this,"type"),d(this,"unit"),this.value=n,this.type=t,this.unit=i}}class Q extends m{}class En extends m{}class Mn extends m{}class Rn extends m{}class Vn extends m{}class Ke extends m{}class ke extends m{}class Xe extends m{}class x extends m{}class G extends m{}class Pe extends m{}class Ye extends m{}class Un{constructor(n){d(this,"input"),d(this,"index",0),this.input=n}consume(){const n=this.input.codePointAt(this.index);return typeof n<"u"&&(this.index+=String.fromCodePoint(n).length),n}reconsume(n){typeof n<"u"&&(this.index-=String.fromCodePoint(n).length)}peek(){const n=[];let t=this.index;for(let i=0;i<3&&t<this.input.length;i++){const r=this.input.codePointAt(t);n.push(r),t+=String.fromCodePoint(r).length}return n}}function Ee(e){return e===10}function R(e){return Ee(e)||e===8192||e===32}function w(e){return e>=48&&e<=57}function De(e){return w(e)||e>=65&&e<=70||e>=97&&e<=102}function An(e){return e>=65&&e<=90}function In(e){return e>=97&&e<=122}function Nn(e){return An(e)||In(e)}function jn(e){return e>=128}function ee(e){return Nn(e)||jn(e)||e===95}function _e(e){return ee(e)||w(e)||e===45}function Dn(e){return e>=0&&e<=8||e===11||e>=14&&e<=31||e===127}function j(e,n){return e===92&&!Ee(n)}function Z(e,n,t){return e===45?ee(n)||n===45||j(n,t):ee(e)?!0:e===92?j(e,n):!1}function ce(e,n,t){return e===43||e===45?w(n)||n===46&&w(t):w(e===46?n:e)}function se(e){const n=e.consume();if(De(n)){let t=[n];for(;De(...e.peek())&&t.length<5;)t.push(e.consume());R(...e.peek())&&e.consume();const i=parseInt(String.fromCodePoint(...t),16);return i===0||i>1114111?65533:i}else return typeof n>"u"?65533:n}function Le(e,n){const t=new xn("");for(;;){const i=e.consume();if(i===n||typeof i>"u")return t;if(i===10)return e.reconsume(i),new kn;if(i===92){const r=e.peek()[0];typeof r>"u"||(Ee(r)?e.consume():t.value+=String.fromCodePoint(se(e)))}else t.value+=String.fromCodePoint(i)}}function ne(e){let n="";for(;;){const t=e.consume();if(_e(t))n+=String.fromCodePoint(t);else if(j(...e.peek()))n+=String.fromCodePoint(se(e));else return e.reconsume(t),n}}function Ln(e){let n="integer",t="";for([43,45].includes(e.peek()[0])&&(t+=String.fromCodePoint(e.consume()));w(...e.peek());)t+=String.fromCodePoint(e.consume());if(e.peek()[0]===46&&w(e.peek()[1]))for(t+=String.fromCodePoint(e.consume(),e.consume()),n="number";w(...e.peek());)t+=String.fromCodePoint(e.consume());return[69,101].includes(e.peek()[0])&&([45,43].includes(e.peek()[1])&&w(e.peek()[2])?(t+=String.fromCodePoint(e.consume(),e.consume(),e.consume()),n="number"):w(e.peek()[1])&&(t+=String.fromCodePoint(e.consume(),e.consume()),n="number")),{value:parseFloat(t),type:n}}function J(e){let n=Ln(e);return Z(...e.peek())?new B(n.value,n.type,ne(e)):e.peek()[0]===37?(e.consume(),new ae(n.value)):new F(n.value,n.type)}function fe(e){for(;;){const n=e.consume();if(n===41||typeof n>"u")return;j(...e.peek())&&se(e)}}function zn(e){const n=new Pn("");for(;R(...e.peek());)e.consume();for(;;){const t=e.consume();if(t===41||typeof t>"u")return n;if(R(t)){for(;R(...e.peek());)e.consume();return e.peek()[0]===41||typeof e.peek()[0]>"u"?(e.consume(),n):(fe(e),new ue)}else{if([34,39,40].includes(t)||Dn(t))return fe(e),new ue;if(t===92)if(j(...e.peek()))n.value+=se(e);else return fe(e),new ue;else n.value+=String.fromCodePoint(t)}}}function me(e){const n=ne(e);if(n.match(/url/i)&&e.peek()[0]===40){for(e.consume();R(e.peek()[0])&&R(e.peek()[1]);)e.consume();return[34,39].includes(e.peek()[0])||R(e.peek()[0])&&[34,39].includes(e.peek()[1])?new ye(n):zn(e)}else return e.peek()[0]===40?(e.consume(),new ye(n)):new xe(n)}function On(e){const n=e.consume(),t=e.peek();if(R(n)){for(;R(...e.peek());)e.consume();return new Q}else{if(n===34)return Le(e,n);if(n===35)if(_e(t[0])||j(...t)){const i=new bn;return Z(...t)&&(i.type="id"),i.value=ne(e),i}else return new C(String.fromCodePoint(n));else return n===39?Le(e,n):n===40?new x:n===41?new G:n===43?ce(...t)?(e.reconsume(n),J(e)):new C(String.fromCodePoint(n)):n===44?new Ke:n===45?ce(...e.peek())?(e.reconsume(n),J(e)):e.peek()[0]===45&&e.peek()[1]===62?(e.consume(),e.consume(),new Mn):Z(...e.peek())?(e.reconsume(n),me(e)):new C(String.fromCodePoint(n)):n===46?ce(...e.peek())?(e.reconsume(n),J(e)):new C(String.fromCodePoint(n)):n===58?new Rn:n===59?new Vn:n===60?t[0]===33&&t[1]===45&&t[2]===45?(e.consume(),e.consume(),e.consume(),new En):new C(String.fromCodePoint(n)):n===64?Z(...t)?new Cn(ne(e)):new C(String.fromCodePoint(n)):n===91?new ke:n===92?j(...t)?(e.reconsume(n),me(e)):new C(String.fromCodePoint(n)):n===93?new Xe:n===123?new Pe:n===125?new Ye:w(n)?(e.reconsume(n),J(e)):ee(n)?(e.reconsume(n),me(e)):typeof n>"u"?void 0:new C(String.fromCodePoint(n))}}function Wn(e){const n=new Un(e),t=[];for(;;){const i=On(n);if(typeof i>"u")return t;t.push(i)}}const Hn=new Set(["px","deg","s","hz","dppx","number","fr"]);function pe(e){return Hn.has(e.toLowerCase())}function Me(e){if(["x","y"].includes(e))return e;if(e==="block")e="y";else if(e==="inline")e="x";else throw new TypeError(`Invalid axis “${e}”`);return e}function Re(e){const n=[];let t=0;function i(){let o=0;const s=t;for(;t<e.length;){const a=e.slice(t,t+1);if(/\s/.test(a)&&o===0)break;if(a==="(")o+=1;else if(a===")"&&(o-=1,o===0)){t++;break}t++}return e.slice(s,t)}function r(){for(;/\s/.test(e.slice(t,t+1));)t++}for(;t<e.length;){const o=e.slice(t,t+1);/\s/.test(o)?r():n.push(i())}return n}function ze(e,n){return e.reduce((t,i)=>(t.has(i[n])?t.get(i[n]).push(i):t.set(i[n],[i]),t),new Map)}function Oe(e,n){const t=[],i=[];for(const r of e)n(r)?t.push(r):i.push(r);return[t,i]}function y(e,n={}){function t(i){return Array.from(i).map(r=>y(r,n))}if(e instanceof CSSUnitValue){if(e.unit==="percent"&&n.percentageReference){const r=e.value/100*n.percentageReference.value,o=n.percentageReference.unit;return new CSSUnitValue(r,o)}const i=e.toSum();if(i&&i.values.length===1&&(e=i.values[0]),e instanceof CSSUnitValue&&e.unit==="em"&&n.fontSize&&(e=new CSSUnitValue(e.value*n.fontSize.value,n.fontSize.unit)),e instanceof CSSKeywordValue){if(e.value==="e")return new CSSUnitValue(Math.E,"number");if(e.value==="pi")return new CSSUnitValue(Math.PI,"number")}return e}if(!e.operator)return e;switch(e.operator){case"sum":e=new CSSMathSum(...t(e.values));break;case"product":e=new CSSMathProduct(...t(e.values));break;case"negate":e=new CSSMathNegate(y(e.value,n));break;case"clamp":e=new CSSMathClamp(y(e.lower,n),y(e.value,n),y(e.upper,n));break;case"invert":e=new CSSMathInvert(y(e.value,n));break;case"min":e=new CSSMathMin(...t(e.values));break;case"max":e=new CSSMathMax(...t(e.values));break}if(e instanceof CSSMathMin||e instanceof CSSMathMax){const i=Array.from(e.values);if(i.every(r=>r instanceof CSSUnitValue&&r.unit!=="percent"&&pe(r.unit)&&r.unit===i[0].unit)){const r=Math[e.operator].apply(Math,i.map(({value:o})=>o));return new CSSUnitValue(r,i[0].unit)}}if(e instanceof CSSMathMin||e instanceof CSSMathMax){const i=Array.from(e.values),[r,o]=Oe(i,a=>a instanceof CSSUnitValue&&a.unit!=="percent"),s=Array.from(ze(r,"unit").values());if(s.some(a=>a.length>0)){const a=s.map(l=>{const u=Math[e.operator].apply(Math,l.map(({value:c})=>c));return new CSSUnitValue(u,l[0].unit)});e instanceof CSSMathMin?e=new CSSMathMin(...a,...o):e=new CSSMathMax(...a,...o)}return i.length===1?i[0]:e}if(e instanceof CSSMathNegate)return e.value instanceof CSSUnitValue?new CSSUnitValue(0-e.value.value,e.value.unit):e.value instanceof CSSMathNegate?e.value.value:e;if(e instanceof CSSMathInvert)return e.value instanceof CSSMathInvert?e.value.value:e;if(e instanceof CSSMathSum){let i=function(o){const s=o.filter(u=>u instanceof CSSUnitValue),a=o.filter(u=>!(u instanceof CSSUnitValue)),l=Array.from(ze(s,"unit").entries()).map(([u,c])=>{const h=c.reduce((T,{value:X})=>T+X,0);return new CSSUnitValue(h,u)});return[...a,...l]},r=[];for(const o of e.values)o instanceof CSSMathSum?r.push(...o.values):r.push(o);return r=i(r),r.length===1?r[0]:new CSSMathSum(...r)}if(e instanceof CSSMathProduct){let i=[];for(const s of e.values)s instanceof CSSMathProduct?i.push(...s.values):i.push(s);const[r,o]=Oe(i,s=>s instanceof CSSUnitValue&&s.unit==="number");if(r.length>1){const s=r.reduce((a,{value:l})=>a*l,1);i=[new CSSUnitValue(s,"number"),...o]}if(i.length===2){let s,a;for(const l of i)l instanceof CSSUnitValue&&l.unit==="number"?s=l:l instanceof CSSMathSum&&[...l.values].every(u=>u instanceof CSSUnitValue)&&(a=l);if(s&&a)return new CSSMathSum(...[...a.values].map(l=>new CSSUnitValue(l.value*s.value,l.unit)))}if(i.every(s=>s instanceof CSSUnitValue&&pe(s.unit)||s instanceof CSSMathInvert&&s.value instanceof CSSUnitValue&&pe(s.value.unit))){const s=new CSSMathProduct(...i).toSum();if(s&&s.values.length===1)return s.values[0]}return new CSSMathProduct(...i)}return e}const v=null,Je=["percent","length","angle","time","frequency","resolution","flex"],V={fontRelativeLengths:{units:new Set(["em","rem","ex","rex","cap","rcap","ch","rch","ic","ric","lh","rlh"])},viewportRelativeLengths:{units:new Set(["vw","lvw","svw","dvw","vh","lvh","svh","dvh","vi","lvi","svi","dvi","vb","lvb","svb","dvb","vmin","lvmin","svmin","dvmin","vmax","lvmax","svmax","dvmax"])},absoluteLengths:{units:new Set(["cm","mm","Q","in","pt","pc","px"]),compatible:!0,canonicalUnit:"px",ratios:{cm:96/2.54,mm:96/2.54/10,Q:96/2.54/40,in:96,pc:96/6,pt:96/72,px:1}},angle:{units:new Set(["deg","grad","rad","turn"]),compatible:!0,canonicalUnit:"deg",ratios:{deg:1,grad:360/400,rad:180/Math.PI,turn:360}},time:{units:new Set(["s","ms"]),compatible:!0,canonicalUnit:"s",ratios:{s:1,ms:1/1e3}},frequency:{units:new Set(["hz","khz"]),compatible:!0,canonicalUnit:"hz",ratios:{hz:1,khz:1e3}},resolution:{units:new Set(["dpi","dpcm","dppx"]),compatible:!0,canonicalUnit:"dppx",ratios:{dpi:1/96,dpcm:2.54/96,dppx:1}}},Ze=new Map;for(const e of Object.values(V))if(e.compatible)for(const n of e.units)Ze.set(n,e);function ve(e){return Ze.get(e)}function $n(e,n){const t={...e};for(const i of Object.keys(n))t[i]?t[i]+=n[i]:t[i]=n[i];return t}function Ve(e){return e==="number"?{}:e==="percent"?{percent:1}:V.absoluteLengths.units.has(e)||V.fontRelativeLengths.units.has(e)||V.viewportRelativeLengths.units.has(e)?{length:1}:V.angle.units.has(e)?{angle:1}:V.time.units.has(e)?{time:1}:V.frequency.units.has(e)?{frequency:1}:V.resolution.units.has(e)?{resolution:1}:e==="fr"?{flex:1}:v}function te(e){if(e instanceof CSSUnitValue){let{unit:n,value:t}=e;const i=ve(e.unit);return i&&n!==i.canonicalUnit&&(t*=i.ratios[n],n=i.canonicalUnit),n==="number"?[[t,{}]]:[[t,{[n]:1}]]}else if(e instanceof CSSMathInvert){if(!(e.value instanceof CSSUnitValue))throw new Error("Not implemented");const n=te(e.value);if(n===v||n.length>1)return v;const t=n[0],i={};for(const[r,o]of Object.entries(t[1]))i[r]=-1*o;return n[0]=[1/t[0],i],n}else if(e instanceof CSSMathProduct){let n=[[1,{}]];for(const t of e.values){const i=te(t),r=[];if(i===v)return v;for(const o of n)for(const s of i)r.push([o[0]*s[0],$n(o[1],s[1])]);n=r}return n}else throw new Error("Not implemented")}function qn(e,n){if(Ve(n)===v)throw new SyntaxError("The string did not match the expected pattern.");const t=te(e);if(!t)throw new TypeError;if(t.length>1)throw new TypeError("Sum has more than one item");const i=Fn(en(t[0]),n);if(i===v)throw new TypeError;return i}function en(e){const[n,t]=e,i=Object.entries(t);if(i.length>1)return v;if(i.length===0)return new CSSUnitValue(n,"number");const r=i[0];return r[1]!==1?v:new CSSUnitValue(n,r[0])}function Fn(e,n){const t=e.unit,i=e.value,r=ve(t),o=ve(n);return!o||r!==o?v:new CSSUnitValue(i*o.ratios[t]/o.ratios[n],n)}function We(e,...n){if(n&&n.length)throw new Error("Not implemented");const t=te(e).map(i=>en(i));if(t.some(i=>i===v))throw new TypeError("Type error");return new CSSMathSum(...t)}function Bn(e){const n={};for(const t of Je)n[t]=-1*e[t];return n}function Qn(e,n){if(e.percentHint&&n.percentHint&&e.percentHint!==n.percentHint)return v;const t={...e,percentHint:e.percentHint??n.percentHint};for(const i of Je)n[i]&&(t[i]??(t[i]=0),t[i]+=n[i]);return t}class O{constructor(n,t){d(this,"name"),d(this,"values"),this.name=n,this.values=t}}class Ue{constructor(n,t){d(this,"value"),d(this,"associatedToken"),this.value=n,this.associatedToken=t}}function Gn(e){if(Array.isArray(e))return e;if(typeof e=="string")return Wn(e);throw new TypeError(`Invalid input type ${typeof e}`)}function Kn(e,n){const t=new O(e.value,[]);for(;;){const i=n.shift();if(i instanceof G||typeof i>"u")return t;n.unshift(i),t.values.push(Ae(n))}}function Xn(e,n){let t;if(n instanceof Pe)t=Ye;else if(n instanceof x)t=G;else if(n instanceof ke)t=Xe;else return;const i=new Ue([],n);for(;;){const r=e.shift();if(r instanceof t||typeof r>"u")return i;e.unshift(r),i.value.push(Ae(e))}}function Ae(e){const n=e.shift();return n instanceof Pe||n instanceof ke||n instanceof x?Xn(e,n):n instanceof ye?Kn(n,e):n}function Yn(e){const n=Gn(e);for(;n[0]instanceof Q;)n.shift();if(typeof n[0]>"u")return null;const t=Ae(n);for(;n[0]instanceof Q;)n.shift();return typeof n[0]>"u"?t:null}function He(e){if(e instanceof x||e instanceof G)return 6;if(e instanceof C)switch(e.value){case"*":return 4;case"/":return 4;case"+":return 2;case"-":return 2}}function W(e){return e[e.length-1]}function de(e,n,t){const i=["+","-"].includes(e.value)?"ADDITION":"MULTIPLICATION",r=n.type===i?n.values:[n],o=t.type===i?t.values:[t];return e.value==="-"?o[0]={type:"NEGATE",value:o[0]}:e.value==="/"&&(o[0]={type:"INVERT",value:o[0]}),{type:i,values:[...r,...o]}}function _n(e){const n=[],t=[];for(;e.length;){const i=e.shift();if(i instanceof F||i instanceof B||i instanceof ae||i instanceof O||i instanceof Ue||i instanceof xe)t.push(i);else if(i instanceof C&&["*","/","+","-"].includes(i.value)){for(;n.length&&!(W(n)instanceof x)&&He(W(n))>He(i);){const r=n.pop(),o=t.pop(),s=t.pop();t.push(de(r,s,o))}n.push(i)}else if(i instanceof x)n.push(i);else if(i instanceof G){if(!n.length)return null;for(;!(W(n)instanceof x);){const r=n.pop(),o=t.pop(),s=t.pop();t.push(de(r,s,o))}if(!(W(n)instanceof x))return null;n.pop()}else if(!(i instanceof Q))return null}for(;n.length;){if(W(n)instanceof x)return null;const i=n.pop(),r=t.pop(),o=t.pop();t.push(de(i,o,r))}return t[0]}function H(e){if(e.type==="ADDITION")return new CSSMathSum(...e.values.map(n=>H(n)));if(e.type==="MULTIPLICATION")return new CSSMathProduct(...e.values.map(n=>H(n)));if(e.type==="NEGATE")return new CSSMathNegate(H(e.value));if(e.type==="INVERT")return new CSSMathInvert(H(e.value));if(e instanceof Ue)return Ie(new O("calc",e.value));if(e instanceof xe){if(e.value==="e")return new CSSUnitValue(Math.E,"number");if(e.value==="pi")return new CSSUnitValue(Math.PI,"number");throw new SyntaxError("Invalid math expression")}else return nn(e)}function Ie(e){if(e.name==="min"||e.name==="max"){const r=e.values.filter(o=>!(o instanceof Q||o instanceof Ke)).map(o=>y(Ie(new O("calc",o))));return e.name==="min"?new CSSMathMin(...r):new CSSMathMax(...r)}if(e.name!=="calc")return null;const n=_n([...e.values]),t=H(n);let i;try{i=y(t)}catch{new CSSStyleSheet().insertRule("error",0)}return i instanceof CSSUnitValue?new CSSMathSum(i):i}function nn(e){if(e instanceof O&&["calc","min","max","clamp"].includes(e.name))return Ie(e);if(e instanceof F&&e.value===0&&!e.unit)return new CSSUnitValue(0,"px");if(e instanceof F)return new CSSUnitValue(e.value,"number");if(e instanceof ae)return new CSSUnitValue(e.value,"percent");if(e instanceof B)return new CSSUnitValue(e.value,e.unit)}function Jn(e){const n=Yn(e);return n===null&&new CSSStyleSheet().insertRule("error",0),n instanceof F||n instanceof ae||n instanceof B||n instanceof O||new CSSStyleSheet().insertRule("error",0),n instanceof B&&Ve(n.unit)===null&&new CSSStyleSheet().insertRule("error",0),nn(n)}function Zn(){let e=new WeakMap;function n(a){switch(a){case"percent":return"%";case"number":return"";default:return a.toLowerCase()}}function t(a){return typeof a=="number"?new CSSUnitValue(a,"number"):a}function i(a){const l=[];for(let u=0;u<a.length;u++)l[u]=t(a[u]);return l}class r{static parse(l){return l instanceof r?l:y(Jn(l),{})}}class o extends r{constructor(l,u,c,h){super(),e.set(this,{values:i(l),operator:u,name:c||u,delimiter:h||", "})}get operator(){return e.get(this).operator}get values(){return e.get(this).values}toString(){const l=e.get(this);return`${l.name}(${l.values.join(l.delimiter)})`}}const s={CSSNumericValue:r,CSSMathValue:o,CSSUnitValue:class extends r{constructor(a,l){super(),e.set(this,{value:a,unit:l})}get value(){return e.get(this).value}set value(a){e.get(this).value=a}get unit(){return e.get(this).unit}to(a){return qn(this,a)}toSum(...a){return We(this,...a)}type(){const a=e.get(this);return Ve(a.unit)}toString(){const a=e.get(this);return`${a.value}${n(a.unit)}`}},CSSKeywordValue:class{constructor(a){this.value=a}toString(){return this.value.toString()}},CSSMathSum:class extends o{constructor(a){super(arguments,"sum","calc"," + ")}},CSSMathProduct:class extends o{constructor(a){super(arguments,"product","calc"," * ")}toSum(...a){return We(this,...a)}type(){return e.get(this).values.map(a=>a.type()).reduce(Qn)}},CSSMathNegate:class extends o{constructor(a){super([arguments[0]],"negate","-")}get value(){return e.get(this).values[0]}type(){return this.value.type()}},CSSMathInvert:class extends o{constructor(a){super([1,arguments[0]],"invert","calc"," / ")}get value(){return e.get(this).values[1]}type(){const a=e.get(this);return Bn(a.values[1].type())}},CSSMathMax:class extends o{constructor(){super(arguments,"max")}},CSSMathMin:class extends o{constructor(){super(arguments,"min")}}};if(!window.CSS&&!Reflect.defineProperty(window,"CSS",{value:{}}))throw Error("Error installing CSSOM support");window.CSSUnitValue||["number","percent","em","ex","px","cm","mm","in","pt","pc","Q","vw","vh","vmin","vmax","rems","ch","deg","rad","grad","turn","ms","s","Hz","kHz","dppx","dpi","dpcm","fr"].forEach(a=>{if(!Reflect.defineProperty(CSS,a,{value:l=>new CSSUnitValue(l,a)}))throw Error(`Error installing CSS.${a}`)});for(let[a,l]of Object.entries(s))if(!(a in window)&&!Reflect.defineProperty(window,a,{value:l}))throw Error(`Error installing CSSOM support for ${a}`)}Zn();const $e="block";let g=new WeakMap,M=new WeakMap;const we=["entry","exit","cover","contain","entry-crossing","exit-crossing"];function qe(e){return e===document.scrollingElement?document:e}function N(e){let n=g.get(e).animations;if(n.length===0)return;let t=e.currentTime;for(let i=0;i<n.length;i++)n[i].tickAnimation(t)}function tn(e,n){if(!e)return null;const t=M.get(e).sourceMeasurements;let i=t.scrollTop;return Me(n)==="x"&&(i=Math.abs(t.scrollLeft)),i}function et(e,n){const t=M.get(e).sourceMeasurements;if(n==="block"?n="y":n==="inline"&&(n="x"),n==="y")return t.scrollHeight-t.clientHeight;if(n==="x")return t.scrollWidth-t.clientWidth}function Ne(e,n){const t=y(e,n);if(t instanceof CSSUnitValue){if(t.unit==="px")return t.value;throw TypeError("Unhandled unit type "+t.unit)}else throw TypeError("Unsupported value type: "+typeof e)}function nt(e){if(!(e instanceof K)){tt(e);return}const n=e.subject;if(!n){D(e,null);return}if(getComputedStyle(n).display=="none"){D(e,null);return}const t=sn(n);D(e,t)}function tt(e){const n=g.get(e);if(!n.anonymousSource)return;const t=rt(n.anonymousSource,n.anonymousTarget);D(e,t)}function Fe(e){return["block","inline","x","y"].includes(e)}function it(e){let n=0,t;return()=>{const i=Date.now();return i-n<5||(t=e(),n=i),t}}function rn(e){const n=getComputedStyle(e),t=e.clientHeight,i=it(()=>document.scrollingElement===e?window.innerHeight:t);return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,clientWidth:e.clientWidth,get clientHeight(){return i()},writingMode:n.writingMode,direction:n.direction,scrollPaddingTop:n.scrollPaddingTop,scrollPaddingBottom:n.scrollPaddingBottom,scrollPaddingLeft:n.scrollPaddingLeft,scrollPaddingRight:n.scrollPaddingRight}}const Be=new WeakMap;function on(e,n){if(!e||!n)return;let t=0,i=0,r=n;const o=e.offsetParent;for(;r&&r!=o;)i+=r.offsetLeft,t+=r.offsetTop,r=r.offsetParent;i-=e.offsetLeft+e.clientLeft,t-=e.offsetTop+e.clientTop;let s=Be.get(n);return s||(s=getComputedStyle(n).fontSize,Be.set(n,s)),{top:t,left:i,offsetWidth:n.offsetWidth,offsetHeight:n.offsetHeight,fontSize:s}}function ie(e){let n=M.get(e);n.sourceMeasurements=rn(e);for(const t of n.timelineRefs){const i=t.deref();if(i instanceof K){const r=g.get(i);r.subjectMeasurements=on(e,i.subject)}}n.updateScheduled||(setTimeout(()=>{for(const t of n.timelineRefs){const i=t.deref();i&&N(i)}n.updateScheduled=!1}),n.updateScheduled=!0)}function D(e,n){const t=g.get(e),i=t.source;if(i!=n){if(i){const r=M.get(i);if(r){r.timelineRefs.delete(e);const o=Array.from(r.timelineRefs).filter(s=>typeof s.deref()>"u");for(const s of o)r.timelineRefs.delete(s);r.timelineRefs.size===0&&(r.disconnect(),M.delete(i))}}if(t.source=n,n){let r=M.get(n);if(!r){r={timelineRefs:new Set,sourceMeasurements:rn(n)},M.set(n,r);const o=new ResizeObserver(l=>{for(const u of l)ie(t.source)});o.observe(n);for(const l of n.children)o.observe(l);const s=new MutationObserver(l=>{for(const u of l)ie(u.target)});s.observe(n,{attributes:!0,attributeFilter:["style","class"]});const a=()=>{r.sourceMeasurements.scrollLeft=n.scrollLeft,r.sourceMeasurements.scrollTop=n.scrollTop;for(const l of r.timelineRefs){const u=l.deref();u&&N(u)}};qe(n).addEventListener("scroll",a),r.disconnect=()=>{o.disconnect(),s.disconnect(),qe(n).removeEventListener("scroll",a)}}r.timelineRefs.add(new WeakRef(e))}}}function he(e,n){let t=g.get(e).animations;for(let i=0;i<t.length;i++)t[i].animation==n&&t.splice(i,1)}function Te(e,n,t){let i=g.get(e).animations;for(let r=0;r<i.length;r++)if(i[r].animation==n)return;i.push({animation:n,tickAnimation:t}),queueMicrotask(()=>{N(e)})}class S{constructor(n){g.set(this,{source:null,axis:$e,anonymousSource:n?n.anonymousSource:null,anonymousTarget:n?n.anonymousTarget:null,subject:null,inset:null,animations:[],subjectMeasurements:null});const t=n&&n.source!==void 0?n.source:document.scrollingElement;if(D(this,t),n&&n.axis!==void 0&&n.axis!=$e){if(!Fe(n.axis))throw TypeError("Invalid axis");g.get(this).axis=n.axis}N(this)}set source(n){D(this,n),N(this)}get source(){return g.get(this).source}set axis(n){if(!Fe(n))throw TypeError("Invalid axis");g.get(this).axis=n,N(this)}get axis(){return g.get(this).axis}get duration(){return CSS.percent(100)}get phase(){const n=this.source;if(!n)return"inactive";if(n===document.scrollingElement)return"active";let t=getComputedStyle(n);return t.display=="none"||n!=document.scrollingElement&&(t.overflow=="visible"||t.overflow=="clip")?"inactive":"active"}get currentTime(){const n=this.source;if(!n||!n.isConnected||this.phase=="inactive")return null;const t=getComputedStyle(n);if(t.display==="inline"||t.display==="none")return null;const i=this.axis,r=tn(n,i),o=et(n,i);return o>0?CSS.percent(100*r/o):CSS.percent(100)}get __polyfill(){return!0}}function ge(e,n){let t=e.parentElement;for(;t!=null;){if(n(t))return t;t=t.parentElement}}function rt(e,n){switch(e){case"root":return document.scrollingElement;case"nearest":return sn(n);case"self":return n;default:throw new TypeError("Invalid ScrollTimeline Source Type.")}}function ot(e){switch(getComputedStyle(e).display){case"block":case"inline-block":case"list-item":case"table":case"table-caption":case"flow-root":case"flex":case"grid":return!0}return!1}function an(e){const n=getComputedStyle(e);return n.transform!="none"||n.perspective!="none"||n.willChange=="transform"||n.willChange=="perspective"||n.filter!="none"||n.willChange=="filter"||n.backdropFilter!="none"}function at(e){return getComputedStyle(e).position!="static"?!0:an(e)}function st(e){switch(getComputedStyle(e).position){case"static":case"relative":case"sticky":return ge(e,ot);case"absolute":return ge(e,at);case"fixed":return ge(e,an)}}function sn(e){if(!(!e||!e.isConnected)){for(;e=st(e);){const n=getComputedStyle(e),t=["auto","scroll","hidden"];if(t.includes(n.overflowX)||t.includes(n.overflowY))return e===document.body&&document.scrollingElement!==null&&getComputedStyle(document.scrollingElement).overflow==="visible"?document.scrollingElement:e}return document.scrollingElement}}function $(e,n){const t=g.get(e),i=t.subjectMeasurements,r=M.get(t.source).sourceMeasurements;return e.phase==="inactive"||!(e instanceof K)?null:lt(n,r,i,t.axis,t.inset)}function lt(e,n,t,i,r){const o=n.direction=="rtl"||n.writingMode=="vertical-rl";let s,a,l={fontSize:t.fontSize};Me(i)==="x"?(s=t.offsetWidth,a=t.left,l.scrollPadding=[n.scrollPaddingLeft,n.scrollPaddingRight],o&&(a+=n.scrollWidth-n.clientWidth,l.scrollPadding=[n.scrollPaddingRight,n.scrollPaddingLeft]),l.containerSize=n.clientWidth):(s=t.offsetHeight,a=t.top,l.scrollPadding=[n.scrollPaddingTop,n.scrollPaddingBottom],l.containerSize=n.clientHeight);const u=ct(r,l),c=a-l.containerSize+u.end,h=a+s-u.start,T=c+s,X=h-s,Y=Math.min(T,X),_=Math.max(T,X);let U,A;const vn=l.containerSize-u.start-u.end,je=s>vn;switch(e){case"cover":U=c,A=h;break;case"contain":U=Y,A=_;break;case"entry":U=c,A=Y;break;case"exit":U=_,A=h;break;case"entry-crossing":U=c,A=je?_:Y;break;case"exit-crossing":U=je?Y:_,A=h;break}return{start:U,end:A}}function ut(e){const n={start:0,end:0};if(!e)return n;let t;if(typeof e=="string"?t=Re(e).map(i=>{if(i==="auto")return"auto";try{return CSSNumericValue.parse(i)}catch{throw TypeError(`Could not parse inset "${e}"`)}}):Array.isArray(e)?t=e:t=[e],t.length===0||t.length>2)throw TypeError("Invalid inset");for(const i of t){if(i==="auto")continue;const r=i.type();if(!(r.length===1||r.percent===1))throw TypeError("Invalid inset")}return{start:t[0],end:t[1]??t[0]}}function ct(e,n){const t={start:0,end:0};if(!e)return t;const[i,r]=[e.start,e.end].map((o,s)=>o==="auto"?n.scrollPadding[s]==="auto"?0:parseFloat(n.scrollPadding[s]):Ne(o,{percentageReference:CSS.px(n.containerSize),fontSize:CSS.px(parseFloat(n.fontSize))}));return{start:i,end:r}}function ln(e,n){if(e instanceof K){const{rangeName:t,offset:i}=n,r=$(e,t),o=$(e,"cover");return ft(r,i,o,e.subject)}if(e instanceof S){const{axis:t,source:i}=e,{sourceMeasurements:r}=M.get(i);let o;return Me(t)==="x"?o=r.scrollWidth-r.clientWidth:o=r.scrollHeight-r.clientHeight,Ne(n,{percentageReference:CSS.px(o)})/o}unsupportedTimeline(e)}function ft(e,n,t,i){if(!e||!t)return 0;let r=getComputedStyle(i);const o={percentageReference:CSS.px(e.end-e.start),fontSize:CSS.px(parseFloat(r.fontSize))};return(Ne(n,o)+e.start-t.start)/(t.end-t.start)}let K=class extends S{constructor(e){super(e);const n=g.get(this);n.subject=e&&e.subject?e.subject:void 0,e&&e.inset&&(n.inset=ut(e.inset)),n.subject&&(new ResizeObserver(()=>{ie(n.source)}).observe(n.subject),new MutationObserver(()=>{ie(n.source)}).observe(n.subject,{attributes:!0,attributeFilter:["class","style"]})),nt(this),n.subjectMeasurements=on(n.source,n.subject),N(this)}get source(){return g.get(this).source}set source(e){throw new Error("Cannot set the source of a view timeline")}get subject(){return g.get(this).subject}get axis(){return g.get(this).axis}get currentTime(){const e=tn(this.source,this.axis);if(e==null)return null;const n=$(this,"cover");if(!n)return null;const t=(e-n.start)/(n.end-n.start);return CSS.percent(100*t)}get startOffset(){return CSS.px($(this,"cover").start)}get endOffset(){return CSS.px($(this,"cover").end)}};const mt=document.getAnimations,pt=window.Element.prototype.getAnimations,dt=window.Element.prototype.animate,Qe=window.Animation;class L{constructor(){this.state="pending",this.nativeResolve=this.nativeReject=null,this.promise=new Promise((n,t)=>{this.nativeResolve=n,this.nativeReject=t})}resolve(n){this.state="resolved",this.nativeResolve(n)}reject(n){this.state="rejected",this.promise.catch(()=>{}),this.nativeReject(n)}}function q(e){e.readyPromise=new L,requestAnimationFrame(()=>{var n;(((n=e.timeline)==null?void 0:n.currentTime)??null)!==null&&(re(e),e.pendingTask==="play"&&(e.startTime!==null||e.holdTime!==null)?cn(e):e.pendingTask==="pause"&&fn(e))})}function un(){return new DOMException("The user aborted a request","AbortError")}function I(e,n){if(n===null)return n;if(typeof n!="number")throw new DOMException(`Unexpected value: ${n}.  Cannot convert to CssNumberish`,"InvalidStateError");const t=e.rangeDuration??100,i=P(e),r=i?t*n/i:0;return CSS.percent(r)}function p(e,n){if(e.timeline){if(n===null)return n;if(n.unit==="percent"){const t=e.rangeDuration??100,i=P(e);return n.value*i/t}throw new DOMException("CSSNumericValue must be a percentage for progress based animations.","NotSupportedError")}else{if(n==null||typeof n=="number")return n;const t=n.to("ms");if(t)return t.value;throw new DOMException("CSSNumericValue must be either a number or a time value for time based animations.","InvalidStateError")}}function ht(e){const n=e.proxy.effect.getTiming();return e.normalizedTiming||n}function cn(e){const n=p(e,e.timeline.currentTime);if(e.holdTime!=null)b(e),e.animation.playbackRate==0?e.startTime=n:(e.startTime=n-e.holdTime/e.animation.playbackRate,e.holdTime=null);else if(e.startTime!==null&&e.pendingPlaybackRate!==null){const t=(n-e.startTime)*e.animation.playbackRate;b(e);const i=e.animation.playbackRate;i==0?(e.holdTime=null,e.startTime=n):e.startTime=n-t/i}e.readyPromise&&e.readyPromise.state=="pending"&&e.readyPromise.resolve(e.proxy),k(e,!1,!1),E(e),e.pendingTask=null}function fn(e){const n=p(e,e.timeline.currentTime);e.startTime!=null&&e.holdTime==null&&(e.holdTime=(n-e.startTime)*e.animation.playbackRate),b(e),e.startTime=null,e.readyPromise.resolve(e.proxy),k(e,!1,!1),E(e),e.pendingTask=null}function Ge(e){if(!e.finishedPromise||e.finishedPromise.state!="pending"||e.proxy.playState!="finished")return;e.finishedPromise.resolve(e.proxy),e.animation.pause();const n=new CustomEvent("finish",{detail:{currentTime:e.proxy.currentTime,timelineTime:e.proxy.timeline.currentTime}});Object.defineProperty(n,"currentTime",{get:function(){return this.detail.currentTime}}),Object.defineProperty(n,"timelineTime",{get:function(){return this.detail.timelineTime}}),requestAnimationFrame(()=>{queueMicrotask(()=>{e.animation.dispatchEvent(n)})})}function z(e){return e.pendingPlaybackRate!==null?e.pendingPlaybackRate:e.animation.playbackRate}function b(e){e.pendingPlaybackRate!==null&&(e.animation.playbackRate=e.pendingPlaybackRate,e.pendingPlaybackRate=null)}function gt(e,n){if(n==null&&e.currentTime!==null)throw new TypeError;n=p(e,n),e.autoAlignStartTime=!1,e.holdTime!==null||e.startTime===null||e.timeline.phase==="inactive"||e.animation.playbackRate===0?e.holdTime=n:e.startTime=p(e,e.timeline.currentTime)-n/e.animation.playbackRate,e.timeline.phase==="inactive"&&(e.startTime=null),e.previousCurrentTime=null}function mn(e){if(!e.timeline)return null;const n=p(e,e.timeline.currentTime);if(n===null||e.startTime===null)return null;let t=(n-e.startTime)*e.animation.playbackRate;return t==-0&&(t=0),t}function St(e,n){if(!e.timeline)return null;const t=p(e,e.timeline.currentTime);return t==null?null:t-n/e.animation.playbackRate}function k(e,n,t){if(!e.timeline)return;let i=n?p(e,e.proxy.currentTime):mn(e);if(i&&e.startTime!=null&&!e.proxy.pending){const r=z(e),o=P(e);let s=e.previousCurrentTime;r>0&&i>=o&&e.previousCurrentTime!=null?((s===null||s<o)&&(s=o),e.holdTime=n?i:s):r<0&&i<=0?((s==null||s>0)&&(s=0),e.holdTime=n?i:s):r!=0&&(n&&e.holdTime!==null&&(e.startTime=St(e,e.holdTime)),e.holdTime=null)}E(e),e.previousCurrentTime=p(e,e.proxy.currentTime),e.proxy.playState=="finished"?(e.finishedPromise||(e.finishedPromise=new L),e.finishedPromise.state=="pending"&&(t?Ge(e):Promise.resolve().then(()=>{Ge(e)}))):(e.finishedPromise&&e.finishedPromise.state=="resolved"&&(e.finishedPromise=new L),e.animation.playState!="paused"&&e.animation.pause())}function P(e){const n=ht(e),t=n.delay+n.endDelay+n.iterations*n.duration;return Math.max(0,t)}function E(e){if(e.timeline)if(e.startTime!==null){const n=e.timeline.currentTime;if(n==null)return;const t=p(e,n);Ce(e,(t-e.startTime)*e.animation.playbackRate)}else e.holdTime!==null&&Ce(e,e.holdTime)}function Ce(e,n){const t=e.timeline,i=e.animation.playbackRate,r=t.currentTime&&t.currentTime.value==(i<0?0:100)?i<0?.001:-.001:0;e.animation.currentTime=n+r}function yt(e){e.pendingTask&&(e.pendingTask=null,b(e),e.readyPromise.reject(un()),q(e),e.readyPromise.resolve(e.proxy))}function Se(e,n){if(!e.timeline)return;const t=e.proxy.playState=="paused"&&e.proxy.pending;let i=!1,r=p(e,e.proxy.currentTime);z(e)==0&&r==null&&(e.holdTime=0),r==null&&(e.autoAlignStartTime=!0),(e.proxy.playState==="finished"||t)&&(e.holdTime=null,e.startTime=null,e.autoAlignStartTime=!0),e.holdTime&&(e.startTime=null),e.pendingTask&&(e.pendingTask=null,i=!0),!(e.holdTime===null&&!e.autoAlignStartTime&&!t&&e.pendingPlaybackRate===null)&&(e.readyPromise&&!i&&(e.readyPromise=null),E(e),e.readyPromise||q(e),e.pendingTask="play",Te(e.timeline,e.animation,be.bind(e.proxy)),k(e,!1,!1))}function be(e){const n=f.get(this);if(!n)return;if(e==null){n.proxy.playState!=="paused"&&n.animation.playState!="idle"&&n.animation.cancel();return}re(n),n.pendingTask&&requestAnimationFrame(()=>{n.pendingTask==="play"&&(n.startTime!==null||n.holdTime!==null)?cn(n):n.pendingTask==="pause"&&fn(n)});const t=this.playState;if(t=="running"||t=="finished"){const i=p(n,e);Ce(n,(i-p(n,this.startTime))*this.playbackRate),k(n,!1,!1)}}function pn(e){e.specifiedTiming=null}function vt(e){const n=e.animation.effect,t=n.updateTiming,i={get:function(l,u){const c=l[u];return typeof c=="function"?c.bind(n):c},set:function(l,u,c){return l[u]=c,!0}},r={apply:function(l){n.getTiming();const u=l.apply(n);if(e.timeline){const c=e.duration??100;u.localTime=I(e,u.localTime),u.endTime=I(e,u.endTime),u.activeDuration=I(e,u.activeDuration);const h=P(e),T=u.iterations?(h-u.delay-u.endDelay)/u.iterations:0;u.duration=h?CSS.percent(c*T/h):CSS.percent(0),e.timeline.currentTime===void 0&&(u.localTime=null)}return u}},o={apply:function(l,u){if(e.specifiedTiming)return e.specifiedTiming;e.specifiedTiming=l.apply(n);let c=Object.assign({},e.specifiedTiming),h;if(c.duration===1/0)throw TypeError("Effect duration cannot be Infinity when used with Scroll Timelines");return(c.duration===null||c.duration==="auto"||e.autoDurationEffect)&&e.timeline&&(e.autoDurationEffect=!0,c.delay=0,c.endDelay=0,h=c.iterations?1e5:0,c.duration=c.iterations?(h-c.delay-c.endDelay)/c.iterations:0,c.duration<0&&(c.duration=0,c.endDelay=h-c.delay),t.apply(n,[c])),e.normalizedTiming=c,e.specifiedTiming}},s={apply:function(l,u,c){if(!(!c||!c.length)){if(e.timeline&&c[0]){const h=c[0],T=h.duration;if(T===1/0)throw TypeError("Effect duration cannot be Infinity when used with Scroll Timelines");if(h.iterations===1/0)throw TypeError("Effect iterations cannot be Infinity when used with Scroll Timelines");typeof T<"u"&&T!=="auto"&&(e.autoDurationEffect=null)}e.specifiedTiming&&l.apply(n,[e.specifiedTiming]),l.apply(n,c),pn(e)}}},a=new Proxy(n,i);return a.getComputedTiming=new Proxy(n.getComputedTiming,r),a.getTiming=new Proxy(n.getTiming,o),a.updateTiming=new Proxy(n.updateTiming,s),a}function wt(e){if(!e.animationRange)return 0;const n=e.animationRange.start==="normal"?hn(e.timeline):e.animationRange.start;return ln(e.timeline,n)}function Tt(e){if(!e.animationRange)return 0;const n=e.animationRange.end==="normal"?gn(e.timeline):e.animationRange.end;return 1-ln(e.timeline,n)}let f=new WeakMap;window.addEventListener("pagehide",e=>{f=new WeakMap},!1);let dn=new WeakMap;function re(e){if(!e.autoAlignStartTime||!e.timeline||!e.timeline.currentTime||e.proxy.playState==="idle"||e.proxy.playState==="paused"&&e.holdTime!==null)return;const n=e.rangeDuration;let t,i;try{t=CSS.percent(wt(e)*100)}catch(o){t=CSS.percent(0),e.animationRange.start="normal",console.warn("Exception when calculating start offset",o)}try{i=CSS.percent((1-Tt(e))*100)}catch(o){i=CSS.percent(100),e.animationRange.end="normal",console.warn("Exception when calculating end offset",o)}e.rangeDuration=i.value-t.value||1e-4;const r=z(e);e.startTime=p(e,r>=0?t:i),e.holdTime=null,e.rangeDuration!==n&&pn(e)}function le(e){throw new Error("Unsupported timeline class")}function hn(e){if(e instanceof ViewTimeline)return{rangeName:"cover",offset:CSS.percent(0)};if(e instanceof S)return CSS.percent(0);le()}function gn(e){if(e instanceof ViewTimeline)return{rangeName:"cover",offset:CSS.percent(100)};if(e instanceof S)return CSS.percent(100);le()}function Ct(e,n){if(!n)return{start:"normal",end:"normal"};const t={start:hn(e),end:gn(e)};if(e instanceof ViewTimeline){const i=Re(n),r=[],o=[];if(i.forEach(s=>{if(we.includes(s))r.push(s);else try{o.push(CSSNumericValue.parse(s))}catch{throw TypeError(`Could not parse range "${n}"`)}}),r.length>2||o.length>2||o.length==1)throw TypeError("Invalid time range or unsupported time range format.");return r.length&&(t.start.rangeName=r[0],t.end.rangeName=r.length>1?r[1]:r[0]),o.length>1&&(t.start.offset=o[0],t.end.offset=o[1]),t}if(e instanceof S){const i=n.split(" ");if(i.length!=2)throw TypeError("Invalid time range or unsupported time range format.");return t.start=CSSNumericValue.parse(i[0]),t.end=CSSNumericValue.parse(i[1]),t}le()}function oe(e,n,t){if(!n||n==="normal")return"normal";if(e instanceof ViewTimeline){let i="cover",r=t==="start"?CSS.percent(0):CSS.percent(100);if(n instanceof Object)n.rangeName!==void 0&&(i=n.rangeName),n.offset!==void 0&&(r=n.offset);else{const o=Re(n);o.length===1?we.includes(o[0])?i=o[0]:r=y(CSSNumericValue.parse(o[0]),{}):o.length===2&&(i=o[0],r=y(CSSNumericValue.parse(o[1]),{}))}if(!we.includes(i))throw TypeError("Invalid range name");return{rangeName:i,offset:r}}if(e instanceof S)return CSSNumericValue.parse(n);le()}class Sn{constructor(n,t,i={}){const r=t instanceof S,o=r?void 0:t,s=n instanceof Qe?n:new Qe(n,o);dn.set(s,this),f.set(this,{animation:s,timeline:r?t:void 0,playState:r?"idle":null,readyPromise:null,finishedPromise:null,startTime:null,holdTime:null,rangeDuration:null,previousCurrentTime:null,autoAlignStartTime:!1,pendingPlaybackRate:null,pendingTask:null,specifiedTiming:null,normalizedTiming:null,effect:null,animationRange:r?Ct(t,i["animation-range"]):null,proxy:this})}get effect(){const n=f.get(this);return n.timeline?(n.effect||(n.effect=vt(n)),n.effect):n.animation.effect}set effect(n){const t=f.get(this);t.animation.effect=n,t.effect=null,t.autoDurationEffect=null}get timeline(){const n=f.get(this);return n.timeline||n.animation.timeline}set timeline(n){const t=f.get(this),i=this.timeline;if(i==n)return;const r=this.playState,o=this.currentTime;let s=P(t),a;o===null?a=null:s===0?a=0:a=p(t,o)/s;const l=i instanceof S,u=n instanceof S,c=this.pending;if(l&&he(t.timeline,t.animation),u){t.timeline=n,b(t),t.autoAlignStartTime=!0,t.startTime=null,t.holdTime=null,(r==="running"||r==="finished")&&((!t.readyPromise||t.readyPromise.state==="resolved")&&q(t),t.pendingTask="play",Te(t.timeline,t.animation,be.bind(this))),r==="paused"&&a!==null&&(t.holdTime=a*s),c&&((!t.readyPromise||t.readyPromise.state=="resolved")&&q(t),r=="paused"?t.pendingTask="pause":t.pendingTask="play"),t.startTime!==null&&(t.holdTime=null),k(t,!1,!1);return}if(t.animation.timeline==n){if(he(t.timeline,t.animation),t.timeline=null,l)switch(o!==null&&(t.animation.currentTime=a*P(t)),r){case"paused":t.animation.pause();break;case"running":case"finished":t.animation.play()}}else throw TypeError("Unsupported timeline: "+n)}get startTime(){const n=f.get(this);return n.timeline?I(n,n.startTime):n.animation.startTime}set startTime(n){const t=f.get(this);if(n=p(t,n),!t.timeline){t.animation.startTime=n;return}t.autoAlignStartTime=!1,p(t,t.timeline.currentTime)==null&&t.startTime!=null&&(t.holdTime=null,E(t));const i=p(t,this.currentTime);b(t),t.startTime=n,t.startTime!==null&&t.animation.playbackRate!=0?t.holdTime=null:t.holdTime=i,t.pendingTask&&(t.pendingTask=null,t.readyPromise.resolve(this)),k(t,!0,!1),E(t)}get currentTime(){const n=f.get(this);return n.timeline?n.holdTime!=null?I(n,n.holdTime):I(n,mn(n)):n.animation.currentTime}set currentTime(n){const t=f.get(this);if(!t.timeline){t.animation.currentTime=n;return}gt(t,n),t.pendingTask=="pause"&&(t.holdTime=p(t,n),b(t),t.startTime=null,t.pendingTask=null,t.readyPromise.resolve(this)),k(t,!0,!1)}get playbackRate(){return f.get(this).animation.playbackRate}set playbackRate(n){const t=f.get(this);if(!t.timeline){t.animation.playbackRate=n;return}t.pendingPlaybackRate=null;const i=this.currentTime;t.animation.playbackRate=n,i!==null&&(this.currentTime=i)}get playState(){const n=f.get(this);if(!n.timeline)return n.animation.playState;const t=p(n,this.currentTime);return t===null&&n.startTime===null&&n.pendingTask==null?"idle":n.pendingTask=="pause"||n.startTime===null&&n.pendingTask!="play"?"paused":t!=null&&(n.animation.playbackRate>0&&t>=P(n)||n.animation.playbackRate<0&&t<=0)?"finished":"running"}get rangeStart(){var n;return((n=f.get(this).animationRange)==null?void 0:n.start)??"normal"}set rangeStart(n){const t=f.get(this);if(!t.timeline)return t.animation.rangeStart=n;if(t.timeline instanceof S){const i=t.animationRange;i.start=oe(t.timeline,n,"start"),re(t),E(t)}}get rangeEnd(){var n;return((n=f.get(this).animationRange)==null?void 0:n.end)??"normal"}set rangeEnd(n){const t=f.get(this);if(!t.timeline)return t.animation.rangeEnd=n;if(t.timeline instanceof S){const i=t.animationRange;i.end=oe(t.timeline,n,"end"),re(t),E(t)}}get replaceState(){return f.get(this).animation.pending}get pending(){const n=f.get(this);return n.timeline?!!n.readyPromise&&n.readyPromise.state=="pending":n.animation.pending}finish(){const n=f.get(this);if(!n.timeline){n.animation.finish();return}const t=z(n),i=P(n);if(t==0)throw new DOMException("Cannot finish Animation with a playbackRate of 0.","InvalidStateError");if(t>0&&i==1/0)throw new DOMException("Cannot finish Animation with an infinite target effect end.","InvalidStateError");b(n);const r=t<0?0:i;this.currentTime=I(n,r);const o=p(n,n.timeline.currentTime);n.startTime===null&&o!==null&&(n.startTime=o-r/n.animation.playbackRate),n.pendingTask=="pause"&&n.startTime!==null&&(n.holdTime=null,n.pendingTask=null,n.readyPromise.resolve(this)),n.pendingTask=="play"&&n.startTime!==null&&(n.pendingTask=null,n.readyPromise.resolve(this)),k(n,!0,!0)}play(){const n=f.get(this);if(!n.timeline){n.animation.play();return}Se(n)}pause(){const n=f.get(this);if(!n.timeline){n.animation.pause();return}this.playState!="paused"&&(n.animation.currentTime===null&&(n.autoAlignStartTime=!0),n.pendingTask=="play"?n.pendingTask=null:n.readyPromise=null,n.readyPromise||q(n),n.pendingTask="pause",Te(n.timeline,n.animation,be.bind(n.proxy)))}reverse(){const n=f.get(this),t=z(n),i=p(n,this.currentTime),r=P(n)==1/0,o=t!=0&&(t<0||i>0||!r);if(!n.timeline||!o){o&&(n.pendingPlaybackRate=-z(n)),n.animation.reverse();return}if(n.timeline.phase=="inactive")throw new DOMException("Cannot reverse an animation with no active timeline","InvalidStateError");this.updatePlaybackRate(-t),Se(n)}updatePlaybackRate(n){const t=f.get(this);if(t.pendingPlaybackRate=n,!t.timeline){t.animation.updatePlaybackRate(n);return}const i=this.playState;if(!(t.readyPromise&&t.readyPromise.state=="pending"))switch(i){case"idle":case"paused":b(t);break;case"finished":const r=p(t,t.timeline.currentTime),o=r!==null?(r-t.startTime)*t.animation.playbackRate:null;n==0?t.startTime=r:t.startTime=r!=null&&o!=null?(r-o)/n:null,b(t),k(t,!1,!1),E(t);break;default:Se(t)}}persist(){f.get(this).animation.persist()}get id(){return f.get(this).animation.id}set id(n){f.get(this).animation.id=n}cancel(){const n=f.get(this);if(!n.timeline){n.animation.cancel();return}this.playState!="idle"&&(yt(n),n.finishedPromise&&n.finishedPromise.state=="pending"&&n.finishedPromise.reject(un()),n.finishedPromise=new L,n.animation.cancel()),n.startTime=null,n.holdTime=null,he(n.timeline,n.animation)}get onfinish(){return f.get(this).animation.onfinish}set onfinish(n){f.get(this).animation.onfinish=n}get oncancel(){return f.get(this).animation.oncancel}set oncancel(n){f.get(this).animation.oncancel=n}get onremove(){return f.get(this).animation.onremove}set onremove(n){f.get(this).animation.onremove=n}get finished(){const n=f.get(this);return n.timeline?(n.finishedPromise||(n.finishedPromise=new L),n.finishedPromise.promise):n.animation.finished}get ready(){const n=f.get(this);return n.timeline?(n.readyPromise||(n.readyPromise=new L,n.readyPromise.resolve(this)),n.readyPromise.promise):n.animation.ready}addEventListener(n,t,i){f.get(this).animation.addEventListener(n,t,i)}removeEventListener(n,t,i){f.get(this).animation.removeEventListener(n,t,i)}dispatchEvent(n){f.get(this).animation.dispatchEvent(n)}}function bt(e,n){const t=n.timeline;t instanceof S&&delete n.timeline;const i=dt.apply(this,[e,n]),r=new Sn(i,t);if(t instanceof S){i.pause();const o=f.get(r);o.animationRange={start:oe(t,n.rangeStart,"start"),end:oe(t,n.rangeEnd,"end")},r.play()}return r}function yn(e){for(let n=0;n<e.length;++n){let t=dn.get(e[n]);t&&(e[n]=t)}return e}function xt(e){let n=pt.apply(this,[e]);return yn(n)}function kt(e){let n=mt.apply(this,[e]);return yn(n)}function Pt(){if(!Reflect.defineProperty(window,"ScrollTimeline",{value:S}))throw Error("Error installing ScrollTimeline polyfill: could not attach ScrollTimeline to window");if(!Reflect.defineProperty(window,"ViewTimeline",{value:K}))throw Error("Error installing ViewTimeline polyfill: could not attach ViewTimeline to window");if(!Reflect.defineProperty(Element.prototype,"animate",{value:bt}))throw Error("Error installing ScrollTimeline polyfill: could not attach WAAPI's animate to DOM Element");if(!Reflect.defineProperty(window,"Animation",{value:Sn}))throw Error("Error installing Animation constructor.");if(!Reflect.defineProperty(Element.prototype,"getAnimations",{value:xt}))throw Error("Error installing ScrollTimeline polyfill: could not attach WAAPI's getAnimations to DOM Element");if(!Reflect.defineProperty(document,"getAnimations",{value:kt}))throw Error("Error installing ScrollTimeline polyfill: could not attach WAAPI's getAnimations to document")}Pt();
